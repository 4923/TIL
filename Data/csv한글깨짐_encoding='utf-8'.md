# .csv 파일을 열었을 때 한글이 깨져보이는 현상 해결

1. 문제상황
    * 공공데이터 `csv` 파일을 `pandas`로 읽어올 때 영문 모를 에러가 줄줄이 나타남
        * 문제의 `csv` 파일을 열어보면 한글이 ??? 등으로 표현되어 있는데 이를 읽어오지 못해서 생기는 문제
        * 하지만 메모장에서 열어보면 멀쩡하게 열린다.

2. 원인
    * Ascii 로 표현할 수 없는 문자를 표현하기 위한 방법이 `encoding`인데 그 방법이 다양함.
    * 변환한 방식과 읽어오는 방식이 다를 때 문자가 깨진다.
    * 주로 공공데이터 `csv` 파일을 열었을 때 나타난다.

* encoding 종류 [참고](https://onlywis.tistory.com/2)
    * `euc-kr` (Extended Unix Code-Korea)
        * 완성형 코드 조합으로, 문자 하나하나마다 코드번호를 부여한 것이다. 외국에서 지원 안 될 확률이 높다.
    * `cp949` (Code Page 949)
        * MS사가 만든 확장 완성형 코드조합.
        * `euc-kr`이 2bytes의 완성형 코드 조합이기 때문에 표현할 수 있는 문자에 한계가 있었다. 이를 확장해서 만든 것이 `cp949`다.
        * `euc-kr`과 호환이 된다.
    * `UTF-8` (Universal Coded Character Set + Transform Format -8 -bit)
        * 유니코드를 지원하기 위한 인코딩 방식
        * 멀티바이트를 이용해 하나의 Character Set에 거의 모든 문자를 넣었다.
            * 멀티바이트: 표현해야하는 문자에 글자크기를 가변으로 변경하여 사용하는 것
            * 1~4bytes로 최대 1112064자 표현 가능
                * 1byte: 영어
                * 2byte: 중동-유럽언어
                * 3byte~: 동아시아권언어
    * (추가) `UNICODE`
        * 전세계 문자를 컴퓨터에서 일관되게 표현할 수 있도록 고안된 조합
        * **인코딩이 아니다**
        * 전세계 문자를 2bytes 숫자로 1:1 매핑시키는 **방식**이 유니코드이고 이를 표현하는 방법이 **인코딩**이다.

3. 해결
    * 공공데이터의 경우 대부분 `cp949` 또는 `euc-kr` 방식으로 인코딩 되어있음. 이 인코딩 방식을 변경해주면 해결된다.

    * **`Pandas`**
        * `read_csv` 옵션
            * `encoding='utf-8'` 임의 지정
                ```py
                pd.read_csv('data/대한민국_주요_도시_인구수.csv', encoding="utf-8")
                ```

    * **`Excel`**
        * Excel에서 인코딩 옵션을 변경
            1. 데이터 - 데이터 가져오기 - 파일에서 - 텍스트/CSV
            2. 깨지는 파일을 선택 한 후 인코딩 방식을 `utf-8`로 변경한다.
            3. 로드 후 저장
